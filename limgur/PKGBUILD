# Contributor: Danny Tatom <dannytatom[at]gmail.com>
# Maintainer: James Pearson <james.m.pearson+arch@gmail.com>

pkgname=limgur
pkgver=1.0.2
pkgrel=2
pkgdesc="CLI to Imgur, letting you upload and delete images."
arch=('i686' 'x86_64')
url="http://github.com/xiongchiamiov/limgur"
depends=('ruby' 'ruby-curb')
makedepends=('git')
optdepends=('scrot: for direct screenshot-upload capabilities')
license=('MIT')
groups=('multimedia')
source=('http://github.com/xiongchiamiov/limgur/tarball/v1.0.2')
md5sums=('802381110593e0b9f90c117a4bebe0ee')

build(){
  cd ${srcdir}
  
  cd xiongchiamiov-limgur-032bc53/lib
  local _libdir="$(ruby -e 'print $:.grep(/\/usr\/lib\/ruby\/[\d\.]+$/)[0]')"
  mkdir -p ${pkgdir}${_libdir}/limgur
  install -o root -g root limgur.rb ${pkgdir}${_libdir}/limgur/limgur.rb
  
  cd ../bin
  chmod +x limgur
  mkdir -p ${pkgdir}/usr/bin
  install -o root -g root limgur ${pkgdir}/usr/bin/limgur
  
  cd ..
  install -D -m644 README.md ${pkgdir}/usr/share/doc/${pkgname}/README
  install -D -m644 LICENSE ${pkgdir}/usr/share/licenses/${pkgname}/LICENSE
}
